Description: Disable time stamps in conffiles, to avoid ever-changing files in /etc.
Author: Joey Hess <joeyh@debian.org>
Bug: http://www.cups.org/str.php?L3067
Bug-Debian: http://bugs.debian.org/549673

Index: cups-1.4.7/scheduler/classes.c
===================================================================
--- cups-1.4.7.orig/scheduler/classes.c	2011-07-14 13:28:49.309799349 +0200
+++ cups-1.4.7/scheduler/classes.c	2011-07-14 13:28:59.139799516 +0200
@@ -736,7 +736,7 @@
   strftime(temp, sizeof(temp) - 1, "%Y-%m-%d %H:%M", curdate);
 
   cupsFilePuts(fp, "# Class configuration file for " CUPS_SVERSION "\n");
-  cupsFilePrintf(fp, "# Written by cupsd on %s\n", temp);
+  cupsFilePrintf(fp, "# Written by cupsd\n");
   cupsFilePuts(fp, "# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING\n");
 
  /*
Index: cups-1.4.7/scheduler/dirsvc.c
===================================================================
--- cups-1.4.7.orig/scheduler/dirsvc.c	2011-07-14 13:28:57.819799491 +0200
+++ cups-1.4.7/scheduler/dirsvc.c	2011-07-14 13:28:59.139799516 +0200
@@ -792,7 +792,7 @@
   strftime(temp, sizeof(temp) - 1, "%Y-%m-%d %H:%M", curdate);
 
   cupsFilePuts(fp, "# Remote cache file for " CUPS_SVERSION "\n");
-  cupsFilePrintf(fp, "# Written by cupsd on %s\n", temp);
+  cupsFilePrintf(fp, "# Written by cupsd\n");
 
  /*
   * Write each local printer known to the system...
Index: cups-1.4.7/scheduler/job.c
===================================================================
--- cups-1.4.7.orig/scheduler/job.c	2011-07-14 13:28:56.469799471 +0200
+++ cups-1.4.7/scheduler/job.c	2011-07-14 13:28:59.179799514 +0200
@@ -1919,7 +1919,7 @@
   strftime(temp, sizeof(temp) - 1, "%Y-%m-%d %H:%M", curdate);
 
   cupsFilePuts(fp, "# Job cache file for " CUPS_SVERSION "\n");
-  cupsFilePrintf(fp, "# Written by cupsd on %s\n", temp);
+  cupsFilePrintf(fp, "# Written by cupsd\n", temp);
   cupsFilePrintf(fp, "NextJobId %d\n", NextJobId);
 
  /*
Index: cups-1.4.7/scheduler/printers.c
===================================================================
--- cups-1.4.7.orig/scheduler/printers.c	2011-07-14 13:28:57.829799494 +0200
+++ cups-1.4.7/scheduler/printers.c	2011-07-14 13:28:59.189799517 +0200
@@ -1620,7 +1620,7 @@
   strftime(temp, sizeof(temp) - 1, "%Y-%m-%d %H:%M", curdate);
 
   cupsFilePuts(fp, "# Printer configuration file for " CUPS_SVERSION "\n");
-  cupsFilePrintf(fp, "# Written by cupsd on %s\n", temp);
+  cupsFilePrintf(fp, "# Written by cupsd\n");
   cupsFilePuts(fp, "# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING\n");
 
  /*
Index: cups-1.4.7/scheduler/subscriptions.c
===================================================================
--- cups-1.4.7.orig/scheduler/subscriptions.c	2011-07-14 13:28:49.339799347 +0200
+++ cups-1.4.7/scheduler/subscriptions.c	2011-07-14 13:28:59.189799517 +0200
@@ -1143,7 +1143,7 @@
   strftime(temp, sizeof(temp) - 1, "%Y-%m-%d %H:%M", curdate);
 
   cupsFilePuts(fp, "# Subscription configuration file for " CUPS_SVERSION "\n");
-  cupsFilePrintf(fp, "# Written by cupsd on %s\n", temp);
+  cupsFilePrintf(fp, "# Written by cupsd\n");
 
   cupsFilePrintf(fp, "NextSubscriptionId %d\n", NextSubscriptionId);
 
