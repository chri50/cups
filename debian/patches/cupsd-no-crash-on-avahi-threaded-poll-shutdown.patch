--- a/scheduler/dirsvc.c
+++ b/scheduler/dirsvc.c
@@ -1339,6 +1339,7 @@
   DNSSDMaster = NULL;
 
 #  else /* HAVE_AVAHI */
+  avahi_threaded_poll_stop(DNSSDMaster);
   avahi_client_free(DNSSDClient);
   DNSSDClient = NULL;
 
